datasource db {
  provider = "sqlite"
  url      = "file:./quixo.db"
}

generator client {
  provider = "prisma-client-js"
}

model Game {
  id           String   @id
  mode         Mode
  players      String[]           // TWO: [P1,P2]  |  FOUR: [A1,B1,A2,B2]
  createdAt    DateTime @default(now())
  status       String             // IN_PROGRESS | FINISHED_<...>
  initialBoard String             // JSON del tablero inicial
  moves        Move[]
}

model Move {
  id        String   @id @default(uuid())
  gameId    String
  player    String                 // nombre/ID del jugador que movi√≥
  from      Json                   // { r, c }
  to        Json                   // { r, c }
  symbol    String                 // "O" | "X"
  dotDir    String?                // "UP" | "RIGHT" | "DOWN" | "LEFT" (modo FOUR)
  elapsedMs Int
  createdAt DateTime @default(now())
  game      Game     @relation(fields: [gameId], references: [id], onDelete: Cascade)
}

enum Mode {
  TWO
  FOUR
}
